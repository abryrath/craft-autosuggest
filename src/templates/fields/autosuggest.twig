{# 
    @param array opts
    - id: required - id for the react component
    - sources: 
 #}
{% macro display(opts) %}
    {% do view.registerAssetBundle('\\unionco\\autosuggest\\assetbundles\\autosuggest\\AutosuggestAsset') %}
    <div id="{{ opts.id ~ '-target' }}"></div>
    <script>
    {# console.log('{{ opts.sources|json_encode|raw}}'); #}
        console.log('{{ opts.id }}');
        function wait() {
            if (!window.autosuggestCreateField) {
                console.log('undefined! - {{ opts.id }}');
                return setTimeout(wait, 500);
            } else {
                window.autosuggestCreateField({
                    id: '{{ opts.id }}',
                    sources: JSON.parse('{{ opts.sources|json_encode|raw }}'),
                    type: "{{ opts.type|default('datalist') }}"
                });
                return;
            }
        };
        wait();
    </script>
{% endmacro %}

